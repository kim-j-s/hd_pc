{{#> layout/default page-title="보험진단 서비스 | 상품" easychart=true }}

<div id="wrap" class="wrap">
	{{> layout/header h-title="보험 진단 결과" }}

	<div id="container" class="container">
		<div class="content">
			<!-- 
				단계별 class 추가 필요
				1단계 : result_st1 클래스 추가
				2단계 : result_st2 클래스 추가
				3단계 : result_st3 클래스 추가
			  -->
			<div class="visual_top result_st1">
				<div class="vs_grade">
					<div class="g1">
						<span class="st">
							1단계<span>짚</span>
						</span>
						<!-- s: 접근성을 위해 현재 해당하는 등급일 시, 추가 -->
						<em class="sr-only">현재 등급</em>
						<!-- e: 접근성을 위해 현재 해당하는 등급일 시, 추가 -->
					</div>
					<div class="g2">
						<span class="st">
							2단계<span>통나무</span>
						</span>
					</div>
					<div class="g3">
						<span class="st">
							3단계<span>벽돌</span>
						</span>
					</div>
				</div>
				<!-- 충분 보장 0~3건일 때 -->
				<!-- prettier-ignore -->
				<h2 class="title_h2">
					<strong>김*대</strong>님의 보험은<br>
					바람이 조금만 불어도 휘청!<br>
					보장이 <strong class="danger">많이 부족</strong>해요
				</h2>

				<!-- 충분 보장 4~6건일 때 -->
				<!-- prettier-ignore -->
				<!-- <h2 class="title_h2">
					<strong>김*대</strong>님의 보험은<br>
					바람이 거세게 불어오면 와르르!<br>
					보장이 <strong class="secondary">조금 더 필요</strong>해요
				</h2> -->

				<!-- 충분 보장 7~8건일 때 -->
				<!-- prettier-ignore -->
				<!-- <h2 class="title_h2">
					<strong>김*대</strong>님의 보험은<br>
					태풍에도 끄떡없어요<br>
					<strong class="point">충분</strong>하게 잘 준비되었네요
				</h2> -->

				<div class="btn_area basic">
					{{> cp/button type="3" size="5" b-text="계약 중인 보험 자세히보기" rightIcon="arrowRightSvg" }}
				</div>
			</div>

			<div class="anchor_wrap sticky_fix">
				<div class="inner">
					<!-- prettier-ignore -->
					<button type="button" class="anchor_btn active" title="해당 영역으로 이동">
						필요해요
						<span class="badge_wrap">
							<span class="hd_badge outline solid_pastel c_primary size_m">6개</span>
						</span>
					</button>
					<!-- prettier-ignore -->
					<button type="button" class="anchor_btn" title="해당 영역으로 이동">
						안전해요
						<span class="badge_wrap">
							<span class="hd_badge outline solid_pastel c_secondary size_m">3개</span>
						</span>
					</button>
				</div>
			</div>

			<!-- s: 필요해요 -->
			<div class="anchor_move" tabindex="0">
				<!-- prettier-ignore -->
				<div class="icon_text_area face1">
					충분히 준비된 보장이<br>
					<strong>하나도 없어요.</strong>
				</div>
				<!-- prettier-ignore -->
				<div class="icon_text_area face1">
					같은또래인 40대남성 평균<br>
					<strong class="point">5개</strong> 보장이 더 <strong class="danger">필요</strong>해요.
				</div>

				<div class="is_coverage_graph ty1">
					<div class="graph_item">
						<div class="inner">
							<button type="button" class="item_btn" onclick="openHDPopup(this,'popup_type01');">
								<span class="hd_badge outline solid_pastel c_danger size_m">
									<!-- .num과 data-percent랑 값 맞춰줘야 함 -->
									<span class="num">70</span>점
								</span>
								<span class="coverage_part">뇌질환</span>
							</button>
							<div class="piechart" data-percent="70" arai-hidden="true"></div>
						</div>
					</div>
					<div class="graph_item">
						<div class="inner">
							<button type="button" class="item_btn" onclick="openHDPopup(this,'popup_type01');">
								<span class="hd_badge outline solid_pastel c_danger size_m">
									<!-- .num과 data-percent랑 값 맞춰줘야 함 -->
									<span class="num">10</span>점
								</span>
								<span class="coverage_part">심장질환</span>
							</button>
							<div class="piechart" data-percent="10" arai-hidden="true"></div>
						</div>
					</div>
					<div class="graph_item">
						<div class="inner">
							<button type="button" class="item_btn" onclick="openHDPopup(this,'popup_type01');">
								<span class="hd_badge outline solid_pastel c_danger size_m">
									<!-- .num과 data-percent랑 값 맞춰줘야 함 -->
									<span class="num">22</span>점
								</span>
								<span class="coverage_part">수술&middot;입원비</span> 
							</button>
							<div class="piechart" data-percent="22" arai-hidden="true"></div>
						</div>
					</div>
					<div class="graph_item">
						<div class="inner">
							<button type="button" class="item_btn" onclick="openHDPopup(this,'popup_type01');">
								<span class="hd_badge outline solid_pastel c_danger size_m">
									<!-- .num과 data-percent랑 값 맞춰줘야 함 -->
									<span class="num">45</span>점
								</span>
								<span class="coverage_part">일상생활</span> 
							</button>
							<div class="piechart" data-percent="45" arai-hidden="true"></div>
						</div>
					</div>
					<div class="graph_item">
						<div class="inner">
							<button type="button" class="item_btn" onclick="openHDPopup(this,'popup_type01');">
								<span class="hd_badge outline solid_pastel c_danger size_m">
									<!-- .num과 data-percent랑 값 맞춰줘야 함 -->
									<span class="num">91</span>점
								</span>
								<span class="coverage_part">암</span> 
							</button>
							<div class="piechart" data-percent="91" arai-hidden="true"></div>
						</div>
					</div>
				</div>
			</div>
			<!-- e: 필요해요 -->

			<div class="divider_ty1"></div>

			<!-- s: 배너영역 -->
			<!-- prettier-ignore -->
			<h3 class="title_h3">
				보장<span class="light">을 더해서 완벽하게 준비하세요</span>
			</h3>
			<!-- 보족한 보장이 있는 경우  -->
			<a href="#" class="bann_text_wrap_ty3 bg1" title="페이지 이동">
				<!-- prettier-ignore -->
				<span class="text">
					<strong class="point">월 99,820원</strong>으로<br>
					<strong>실손 보장을 채우세요</strong>
					<span><span class="arrowRightSvg_ty4">실손보험 알아보기</span></span>
				</span>
			</a>
			<a href="#" class="bann_text_wrap_ty3 bg2" title="페이지 이동">
				<!-- prettier-ignore -->
				<span class="text">
					<strong class="point">월 15,820원</strong>으로<br>
					<strong>뇌, 심장, 수술비/입원, 사망 보장을 채우세요</strong>
					<span><span class="arrowRightSvg_ty4">건강보험 알아보기</span></span>
				</span>
			</a>
			<a href="#" class="bann_text_wrap_ty3 bg3" title="페이지 이동">
				<!-- prettier-ignore -->
				<span class="text">
					<strong class="point">월 99,820원</strong>으로<br>
					<strong>일상생활 보장을 채우세요</strong>
					<span><span class="arrowRightSvg_ty4">주택화재보험 알아보기</span></span>
				</span>
			</a>
			<!-- 모든 보장그룹이 충분할 경우 -->
			<a href="#" class="bann_text_wrap_ty3 bg1" title="페이지 이동">
				<!-- prettier-ignore -->
				<span class="text">
					<strong>노후 준비를 위한 계획을 세워보세요</strong>
					<span><span class="arrowRightSvg_ty4">연금보험 알아보기</span></span>
				</span>
			</a>
			<a href="#" class="bann_text_wrap_ty3 bg2" title="페이지 이동">
				<!-- prettier-ignore -->
				<span class="text">
					<strong>설레는 해외여행을 준비 중인가요?</strong>
					<span><span class="arrowRightSvg_ty4">해외여행보험 알아보기</span></span>
				</span>
			</a>
			<a href="#" class="bann_text_wrap_ty3 bg3" title="페이지 이동">
				<!-- prettier-ignore -->
				<span class="text">
					<strong>사랑스러운 우리 강아지도 챙겨주세요</strong>
					<span><span class="arrowRightSvg_ty4">강아지 펫보험 알아보기</span></span>
				</span>
			</a>
			<!-- e: 배너영역 -->

			<div class="divider_ty1"></div>

			<!-- s: 안전해요 -->
			<div class="anchor_move" tabindex="0">
				<!-- prettier-ignore -->
				<div class="icon_text_area face2">
					<strong class="point">3개 보장</strong>을<br>
					<strong class="secondary">충분</strong>하게 준비해두셨어요
				</div>
				<!-- prettier-ignore -->
				<div class="icon_text_area face2">
					같은또래인 40대남성 평균<br>
					더 <strong>필요</strong>한 보장이 없어요.
				</div>

				<div class="is_coverage_graph ty2">
					<div class="graph_item">
						<div class="inner">
							<button type="button" class="item_btn" onclick="openHDPopup(this,'popup_type01');">
								<span class="hd_badge outline solid_pastel c_danger size_m">
									<!-- .num과 data-percent랑 값 맞춰줘야 함 -->
									<span class="num">15</span>점
								</span>
								<span class="coverage_part">사망</span>
							</button>
							<div class="piechart" data-percent="15" arai-hidden="true"></div>
						</div>
					</div>
					<div class="graph_item">
						<div class="inner">
							<button type="button" class="item_btn" onclick="openHDPopup(this,'popup_type01');">
								<span class="hd_badge outline solid_pastel c_danger size_m">
									<!-- .num과 data-percent랑 값 맞춰줘야 함 -->
									<span class="num">00</span>점
								</span>
								<span class="coverage_part">실손</span>
							</button>
							<div class="piechart" data-percent="0" arai-hidden="true"></div>
						</div>
					</div>
					<div class="graph_item">
						<div class="inner">
							<button type="button" class="item_btn" onclick="openHDPopup(this,'popup_type01');">
								<span class="hd_badge outline solid_pastel c_danger size_m">
									<!-- .num과 data-percent랑 값 맞춰줘야 함 -->
									<span class="num">57</span>점
								</span>
								<span class="coverage_part">운전자</span> 
							</button>
							<div class="piechart" data-percent="57" arai-hidden="true"></div>
						</div>
					</div>
				</div>
			</div>
			<!-- e: 안전해요 -->
			
			<ul class="list_ty2">
				<li>준법감시인 확인필 제20233828호<br>(2023.04.21~2024.10.16)</li>
			</ul>

			<!-- s: 가입 시 유의사항 -->
			{{#> cp/notice dp-title="가입시 유의 사항" dp-active="active"}}
			<ul class="list_depth">
				<li>
					보험계약자가 기존에 체결했던 보험계약을 해지하고 다른 보험계약을 체결하면 보험 인수가 거절되거나 보험료가 인상되거나 보장내용이 달라질 수 있습니다. 또한 지급한도, 면책사항 등에 따라 보험금 지급이 제한될 수 있습니다.
				</li>
				<li>
					이 보험계약은 예금자보호법에 따라 예금보험공사가 보호하되, 보호한도는 본 보험회사에 있는 귀하의 모든 예금보호대상 금융상품의 해양환급금(또는 만기시 보험금이나 사고보험금)에 기다지급금을 합하여 1인당 ‘최고 5천만원'이며, 5천만원을 초과하는 나머지 금액은 보호하지 않습니다.
				</li>
				<li>보험계약 체결 전 상품설명서 및 약관을 읽어보시기 바랍니다.</li>
			</ul>
			{{/ cp/notice }}
			<!-- e: 가입 시 유의사항 -->
		</div>
	</div>
</div>

<!-- s: popup area -->

<!-- s: Bottom 팝업 -->
{{#> popup/popup_bottom popup-id="popup_type01" }}
<div class="popup_cont">
	<div class="popup_content">
		<!-- s: popup_content_top -->
		<div class="popup_content_top txt_center">
			<!-- prettier-ignore -->
			<h2 class="title_h2">
				<strong>40대, 남자</strong> 평균<br>
				가입금액 대비 <strong class="danger"><!-- 부족할때만 class 추가 -->부족</strong>해요
			</h2>
		</div>
		<!-- e: popup_content_top -->

		<a href="#" class="bann_text_wrap_ty3 bg1" title="페이지 이동">
			<!-- prettier-ignore -->
			<span class="text">
				<strong class="point">월 99,820원</strong>으로<br>
				<strong>뇌/심장/수술비·입원/사망</strong>
				<span><span class="arrowRightSvg_ty4">건강보험 알아보기</span></span>
			</span>
		</a>
		<div class="card_item_wrap">
			<!-- 부족 -->
			<div class="card_item">
				<div class="insu_plan">
					<!-- prettier-ignore -->
					<div class="tit">
						<span class="badge_wrap">
							<span class="hd_badge outline solid_pastel c_danger size_m">부족</span>
						</span>
						<span>뇌출혈진단</span>
					</div>
					<p>의사에 의해 뇌출혈로 진단이 확정된 경우 진단비 지급</p>
				</div>
				<!-- aria-label 값 변경 필요 -->
				<div class="progress_bar_ty4" role="img" tabindex="0" aria-label="1,000만원 보장 중 진행률 55% (평균 1,800만원)">
					<div class="progress_bar_per_cover">
						<div class="progress_bar_per">
							<div class="per_bar">
								<span class="per_bar_dp" style="width:55%;"></span>
							</div>
						</div>
						<div class="text_item">
							<div>1,000만원 보장 중</div>
							<div>평균 1,800만원</div>
						</div>
					</div>	
				</div>
			</div>
			<!-- 미가입 -->
			<div class="card_item">
				<div class="insu_plan">
					<!-- prettier-ignore -->
					<div class="tit">
						<span class="badge_wrap">
							<span class="hd_badge outline solid_pastel c_info size_m">미가입</span>
						</span>
						<span>뇌졸중진단</span>
					</div>
					<p>의사에 의해 뇌졸중으로 진단이 확정된 경우 진단비 지급</p>
				</div>
				<!-- aria-label 값 변경 필요 -->
				<div class="progress_bar_ty4" role="img" tabindex="0"  aria-label="미가입 진행률 0% (평균 1,000만원)">
					<div class="progress_bar_per_cover">
						<div class="progress_bar_per">
							<div class="per_bar">
								<span class="per_bar_dp" style="width:0%;"></span>
							</div>
						</div>
						<div class="text_item">
							<div>미가입</div>
							<div>평균 1,000만원</div>
						</div>
					</div>	
				</div>
			</div>
			<!-- 충분 -->
			<div class="card_item">
				<div class="insu_plan">
					<!-- prettier-ignore -->
					<div class="tit">
						<span class="badge_wrap">
							<span class="hd_badge outline solid_pastel c_secondary size_m">충분</span>
						</span>
						<span>뇌혈관질환진단</span>
					</div>
					<p>의사에 의해 뇌혈관 질환으로 진단이 확정된 경우 진단비 지급(뇌경색증, 뇌졸중, 뇌출혈, 대뇌/뇌전동맥의 폐쇄 및 협착 등)</p>
				</div>
				<!-- aria-label 값 변경 필요 -->
				<div class="progress_bar_ty4 sufficient" role="img" tabindex="0" aria-label="1,000만원 보장 중 진행률 100% (평균 1,000만원)"><!-- 100%로 이상일때 sufficient 추가 -->
					<div class="progress_bar_per_cover">
						<div class="progress_bar_per">
							<div class="per_bar">
								<span class="per_bar_dp" style="width:100%;"></span>
							</div>
						</div>
						<div class="text_item">
							<div>1,000만원 보장 중</div>
							<div>평균 1,000만원</div>
						</div>
				</div>	
			</div>
		</div>
		</div>
		<ul class="list_ty2">
			<li>위 나이대별 평균 금액은 한국신용정보원의 CreDB 보험표본 DB에 등록된 260만명의 계약 및 담보정보를 바탕으로 제공되었습니다.</li>
		</ul>
	</div>
</div>

<!-- s: 하단 고정 버튼 영역 -->
<div class="popup_bottom">
	<div class="btn_area">
		{{> cp/button type="1" size="1" b-text="확인"}}
	</div>
</div>
<!-- s: 하단 고정 버튼 영역 -->
{{/ popup/popup_bottom}}
<!-- e: Bottom 팝업 -->

<!-- e: popup area -->
 


<script>
	function coverageGraph(target) {
		let colorTy = null;
		const $target = target;

		if($target.hasClass('ty1')){
			colorTy = '#DE3412';
		}else if($target.hasClass('ty2')){
			colorTy = '#346FB2';
		}

		$target.find('.piechart').easyPieChart({
			scaleColor: "transparent",
			lineWidth: 4,
			lineCap: 'round',
			barColor: colorTy,
			trackColor:	"#CDD1D5",
			size: 132,
			rotate: 0,    
			animate: 1500,

			onStep: function(value) {
				$(this.el).find('.hd_badge').children('.num').text(Math.round(value));
			},
			onStop: function(value, to) {
				$(this.el).find('.hd_badge').children('.num').text(Math.round(to));
			}
		});
	}

	function graphChk(val){
		const $this = $('.container'),
					contentH = $this.innerHeight(),
					scrollVal = val;

		$this.find('.is_coverage_graph').each(function(){
			const $graph = $(this), 
						graphOffset = $graph.position().top,
						newVal = scrollVal + graphOffset;

						// console.log('현재 스크롤 위치 : ' + scrollVal, ' / 그래프 위치 : ' + newVal);
						// console.log(contentH);

			if(graphOffset < contentH || scrollVal >= newVal - contentH){
				coverageGraph($graph);
			}
		})
	}

	$(window).on('load',function(){
		graphChk();

		$('.container').on('scroll', function(){
			const $this = $(this),
						scrollTop = $this.scrollTop();

			graphChk(scrollTop);
		})
		
	});
</script>
{{/ layout/default }}