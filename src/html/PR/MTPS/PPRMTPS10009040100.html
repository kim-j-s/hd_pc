{{#> layout/default no-sp=true page-title="상담 신청 안내 | 상품"}}

<!-- s: Full 팝업 -->
{{#> popup/popup_full popup-id="pop_type01" popup-title="상담 신청 안내" popup-active=true}}
<div class="popup_cont">
	<div class="popup_content">
		<!-- .process_info_area -->
		<div class="process_info_area">
			<div class="complete_info" aria-hidden="true">
				<lottie-player src="../../../json/lottie_info.jso" background="transparent" speed="1" autoplay></lottie-player>
			</div>
			<h2 class="process_title">
				<strong>현재 페이지에서 나가시겠습니까?</strong>
			</h2>
			<div class="process_desc">
				저장되지 않은 정보는 사라지며,<br>다시 진행해야 할 수 있어요.
			</div>
		</div>
		<!-- //.process_info_area -->
		
		<div class="call_box">
			<div class="info_gray ty2">
				<div class="center_info">
					<h4 class="title_h4">다이렉트 고객센터 <span class="title_h3">1899-6782</span></h4>
					<!-- s: 25-08-21 수정 -->
					<h4 class="title_h4">전화가입 상담센터 <span class="title_h3">1577-1001</span></h4>
					<!-- e: 25-08-21 수정 -->
				</div>
				<ul class="list_ty5">
					<li>전화가입 시 보험료는 인터넷 보험료와 상이합니다.</li>
				</ul>
			</div>
		</div>

	</div>
</div>
<div class="popup_bottom">
	<div class="btn_area">
		{{> cp/button type="3" size="2" b-text="홈으로" }}
		{{> cp/button type="1" size="2" b-text="계산 진행하기" }}
	</div>
</div>
{{/ popup/popup_full}}
<!-- e: Full 팝업 -->


<script>
	$(function(){	

		console.log('aa');
		function updateProgressBarPosition($progressBar) {
			
			// 접근성 관련 문구 생성 후 삽입
			var current = $progressBar.find('[data-pbc]').data('pbc');
			var total = $progressBar.find('[data-pbce]').data('pbce');

			$progressBar.attr('aria-label', '전체 ' + total + '단계 중 ' + current + '단계 완료');
			
			// 전체 넓이
			var $progressBarPer = $progressBar.find('.progress_bar_per');
			var progressBarPerWidth = $progressBarPer.outerWidth(); // 기준 넓이(px)

			// 퍼센트 계산 (소수점 없이)
			var percent = Math.floor((current / total) * 100);       // 현재 진행률(%)

			var pixelWidth = Math.floor((percent / 100) * progressBarPerWidth);  // 진행률 px 환산

			var $perBar = $progressBar.find('.per_bar');
			var $perBarDp = $perBar.find('.per_bar_dp');
			var perBarDpWidth = $perBarDp.outerWidth();

			// console.log('움직이는 컨텐츠 넓이 : ', perBarDpWidth);

			// 초기 클래스 제거
			$perBar.removeClass('pos');
			$perBarDp.removeClass('poe');

			// 앞에 고정하기
			if (pixelWidth < perBarDpWidth / 2) {
				$perBar.addClass('pos');
			} else {
				$perBar.removeClass('pos');
			}

			// 끝으로 보내기
			if (progressBarPerWidth - pixelWidth < perBarDpWidth / 2) {
				$perBar.addClass('poe');
			} else {
				$perBar.removeClass('poe');
			}

			// per_bar 너비 설정
			setTimeout(function(){
				$perBar.addClass('active').css('width', percent + '%');
			}, 100);
		}

		// 여러 개의 .progress_bar_ty1_count 대해 반복 처리
		$('.progress_bar_ty1_count').each(function() {
			var $this = $(this); // 각 progress_bar_ty1을 $this로 참조
			
			// 윈도우 로드 시 updateProgressBarPosition 함수 호출
			$(window).on('load', function () {
				updateProgressBarPosition($this);
			});

			// 리사이즈 시에도 적용
			$(window).on('resize', function () {
				console.log('리사이즈 됨?');
				updateProgressBarPosition($this);
			});
		});
	});
</script>

{{/ layout/default }}
