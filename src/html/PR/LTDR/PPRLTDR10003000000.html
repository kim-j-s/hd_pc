{{#> layout/default page-title="보험료 확인 | 상품"}}
<div id="wrap" class="wrap">
	{{> layout/header_pc h-prd="운전자보험" h-title="보험료 확인" }}

	<div id="container" class="container">
		<div class="content">
			<div class="title_view_wrap">
				<div class="page_title">
					<div class="p_info">보험료확인</div>
					<h2 class="p_title">
						자동차 사고,<br>
						<strong>어디까지 보장</strong>을 받아야 할까요?
					</h2>
				</div>
				<div class="btn_area">
					{{> cp/button type="3" size="3" b-text="모든 플랜 확인"}}
					{{> cp/button type="3" size="3" b-text="계산 결과 문자로 받기"}}
				</div>
			</div>

			<div class="guarantee_select_wrap guarantee_select_wrap_n3">
				<div class="select_item t3">
					<div class="item_radio">
						<input type="radio" name="g_item" id="g_item_ty01">
						<label for="g_item_ty01">
							<span class="badge_wrap">
								<span class="hd_badge class_type class_type03">
									<span class="text">실속 <em>13개 보장</em></span>
								</span>
							</span>
							<span class="item_top">
								<span class="top_title">운전자 3대 필수 비용은 기본</span>
								<em class="top_info">
									<span class="price"><strong>7,200</strong> 원</span>
								</em>
							</span>
							<span class="item_desc">
								자동차 사고 깁스, 중증 외상, 중대 화상<br/>보장을 더했습니다.
							</span>
						</label>
					</div>
				</div>
				<div class="select_item t2">
					<div class="item_radio">
						<input type="radio" name="g_item" id="g_item_ty02">
						<label for="g_item_ty02">
							<span class="badge_wrap">
								<span class="hd_badge class_type class_type02">
									<span class="text">표준 <em>40개 보장</em></span>
								</span>
							</span>
							<span class="item_top">
								<span class="top_title">자동차 사고로 다쳤을 때 걱정 없게 </span>
								<em class="top_info">
									<span class="price"><strong>14,900</strong> 원</span>
								</em>
							</span>
							<span class="item_desc">
								자동차 사고 부상, 골절, 상처 봉합, 흉터 성형 비용 보장을 더했습니다.

							</span>
						</label>
					</div>
				</div>
				<div class="select_item t1">
					<div class="item_radio">
						<input type="radio" name="g_item" id="g_item_ty03">
						<label for="g_item_ty03">
							<span class="badge_wrap">
								<span class="hd_badge class_type class_type01">
									<span class="text">고급 <em>60개 보장</em></span>
								</span>
							</span>
							<span class="item_top">
								<span class="top_title">사고 후 치료와 재활까지도 꼼꼼하게</span>
								<em class="top_info">
									<span class="price"><strong>23,900</strong> 원</span>
								</em>
							</span>
							<span class="item_desc">
								입원, 통원 간병비, 상해 수술비, 재활 치료비 등 빠른 일상생활 복귀를 돕는 보장을 더했습니다

							</span>
						</label>
					</div>
				</div>
			</div>

			<div class="dc_info_box ty2">
				<ul class="dc_list column">
					<li>
						<button type="button" onclick="openHDPopup(this,'ex_popup_bottom');" class="link">
							현대해상 자동차보험 가입 고객 <strong class="point">매월 7% 할인</strong>해드려요
						</button>
					</li>
					<li>
						<button type="button" onclick="openHDPopup(this,'ex_popup_bottom');" class="link">
							현대카드로 결제하고 <strong class="point">M포인트 100%</strong> 사용해보세요
						</button>
					</li>
				</ul>
			</div>

			<div class="guarantee_info"> 
				<div class="item_right">
					<ul class="list_ty4">
						<li>
							<span class="text">보헙/납입기간</span>
							<strong class="data">10년</strong>
						</li>
						<li>
							<span class="text">납입방법</span>
							<strong class="data">월납</strong>
						</li>
					</ul>
					{{> cp/button type="3" size="5" b-text="변경" rightIcon="resetSvg" btn-title="가입조건 변경 팝업열기"}}
				</div>
			</div>

			<!-- s: 상세 보장 목록 -->
			<div class="acc_group">
				<div class="space_list_ty2">
					<div class="acd_item acd_item_ty2">
						{{#> cp/accordion ac-title="꼭 가입해야 할 보장" cont-class="" ac-active=true }}
						<div class="coverage_item_list_ty3">
							<div class="list">
								<div class="detail_list">
									<div class="item_inner">
										{{> cp/ibs sct="상해사망•후유장해(해외여행중)" cts="계약자 본인 외 가족/동반인은 사망보장 미가입" }}
									</div>									
								</div>
								<div class="detail_price">
									<span class="point">3억원</span>
								</div>
							</div>
						</div>
						{{/ cp/accordion }}
					</div>

					<div class="acd_item acd_item_ty2">
						{{#> cp/accordion ac-title="해외에서 아프거나 다쳤을 때" cont-class="" ac-active=true }}
							<ul class="coverage_item_list_ty3">
								<li class="list">
									<div class="detail_list">
										<div class="item_inner">
											{{> cp/ibs cid="checkbox02-1" sct="질병사망및80%고도후유장해" cts="계약자 본인 외 가족/동반인은 사망보장 미가입" }}
										</div>
									</div>
									<div class="detail_price">
										<span class="point">100만원</span>
									</div>
								</li>
								<li class="list">
									<div class="detail_list">
										<div class="item_inner">
											{{> cp/ibs cid="checkbox02-2" sct="해외여행 상해_해외의료실비보장" }}
										</div>
									</div>
									<div class="detail_price">
										<span class="point">5,000만원</span>
									</div>
								</li>
								<li class="list">
									<div class="detail_list">
										<div class="item_inner">
											{{> cp/ibs cid="checkbox02-3" sct="해외여행 질병_해외의료실비보장" }}
										</div>
									</div>
									<div class="detail_price">
										<span class="point">5,000만원</span>
									</div>
								</li>
								<li class="list">
									<div class="detail_list">
										<div class="item_inner">
											{{> cp/ibs cid="checkbox02-4" sct="해외여행 상해급여_국내의료실비보장(통원한도:20만원)" }}
										</div>
									</div>
									<div class="detail_price">
										<span class="point">5,000만원</span>
									</div>
								</li>
								<li class="list">
									<div class="detail_list">
										<div class="item_inner">
											{{> cp/ibs cid="checkbox02-5" sct="해외여행 질병급여_국내의료실비보장(통원한도:20만원)" }}
										</div>
									</div>
									<div class="detail_price">
										<span class="point">5,000만원</span>
									</div>
								</li>
								<li class="list">
									<div class="detail_list">
										<div class="item_inner">
											{{> cp/ibs cid="checkbox02-6" sct="해외여행 상해비급여_국내의료실비보장(통원한도:20만원)" }}
										</div>
									</div>
									<div class="detail_price">
										<span class="point">5,000만원</span>
									</div>
								</li>
								<li class="list">
									<div class="detail_list">
										<div class="item_inner">
											{{> cp/ibs cid="checkbox02-7" sct="해외여행 질병비급여_국내의료실비보장(통원한도:20만원)" }}
										</div>
									</div>
									<div class="detail_price">
										<span class="point">5,000만원</span>
									</div>
								</li>											
							</ul>
						{{/ cp/accordion }}
					</div>

					<div class="acd_item acd_item_ty2">
						{{#> cp/accordion ac-title="여행 중 문제가 생겼을 때" cont-class="" ac-active=true }}
							<ul class="coverage_item_list_ty3">
								<li class="list">
									<div class="detail_list">
										<div class="item_inner">
											{{> cp/ibs cid="checkbox03-1" sct="중대사고 구조송환비용 등(7일 이상)" }}
										</div>
									</div>
									<div class="detail_price">
										<span class="point">5,000만원</span>
									</div>
								</li>
								<li class="list">
									<div class="detail_list">
										<div class="item_inner">
											{{> cp/ibs cid="checkbox03-2" sct="항공기납치위로금" }}
										</div>
									</div>
									<div class="detail_price">
										<span class="point">140만원</span>
									</div>
								</li>
								<li class="list">
									<div class="detail_list">
										<div class="item_inner">
											{{> cp/ibs cid="checkbox03-3" sct="해외여행중 중단사고 발생 추가비용" }}
										</div>
									</div>
									<div class="detail_price">
										<span class="point">30만원</span>
									</div>
								</li>
								<li class="list">
									<div class="detail_list">
										<div class="item_inner">
											{{> cp/ibs cid="checkbox03-4" sct="여권분실 후 재발급 비용" }}
										</div>
									</div>
									<div class="detail_price">
										<span class="point">20만원</span>
									</div>
								</li>
							</ul>
						{{/ cp/accordion }}
					</div>

					<div class="acd_item acd_item_ty2">
						{{#> cp/accordion ac-title="일정에 문제가 생겼을 때" cont-class="" ac-active=true }}
							<ul class="coverage_item_list_ty3">
								<li class="list">
									<div class="detail_list">
										<div class="item_inner">
											{{> cp/ibs cid="checkbox04-1" sct="항공기 및 수하물 지연비용" }}
										</div>
									</div>
									<div class="detail_price">
										<span class="point">30만원</span>
									</div>
								</li>
								<li class="list">
									<div class="detail_list">
										<div class="item_inner">
											{{> cp/ibs cid="checkbox04-2" sct="출국항공기 지연(2~4시간) 손해 보장" }}
										</div>
									</div>
									<div class="detail_price">
										<span class="point">3만원</span>
									</div>
								</li>
							</ul>
						{{/ cp/accordion }}
					</div>

					<div class="acd_item acd_item_ty2">
						{{#> cp/accordion ac-title="물건이 손상됐거나 도난당했을 때" cont-class="" ac-active=true }}
							<ul class="coverage_item_list_ty3">
								<li class="list">
									<div class="detail_list">
										<div class="item_inner">
											{{> cp/ibs cid="checkbox05-1" sct="휴대품손해(분실제외)" }}
										</div>
									</div>
									<div class="detail_price">
										<span class="point">200만원</span>
									</div>
								</li>
								<li class="list">
									<div class="detail_list">
										<div class="item_inner">
											{{> cp/ibs cid="checkbox05-2" sct="해외여행중 자택 도난손해(가재)보장" }}
										</div>
									</div>
									<div class="detail_price">
										<span class="point">300만원</span>
									</div>
								</li>
							</ul>
						{{/ cp/accordion }}
					</div>

					<div class="acd_item acd_item_ty2">
						{{#> cp/accordion ac-title="다른 사람에게 피해를 입혔을 때" cont-class="" ac-active=true }}
							<ul class="coverage_item_list_ty3">
								<li class="list">
									<div class="detail_list">
										<div class="item_inner">
											{{> cp/ibs cid="checkbox06-1" sct="일괄배상(해외여행중)" }}
										</div>
									</div>
									<div class="detail_price">
										<span class="point">5,000만원</span>
									</div>
								</li>
							</ul>
						{{/ cp/accordion }}
					</div>
				</div>
			</div>
			<!-- e: 상세 보장 목록 -->


			<div class="bottom_fix_wrap">
				<div class="btn_area">
					{{> cp/button type="3" size="1" b-text="이전" }}
					{{> cp/button type="1" size="1" b-text="원하는 보장을 선택 중이에요" disabled=true }}
					<!-- {{> cp/button type="1" size="1" b-text="선택한 플랜으로 가입할게요" }} -->
					<!-- {{> cp/button type="1" size="1" b-text="이대로 가입할래요" }} -->
				</div>
			</div>

		
		</div>

		
		<!-- s: 사이드 패널 -->
		{{> cp/panel_운전자 panel-title="가입자 정보" step1=true }}
		<!-- e: 사이드 패널 -->
	</div>
</div>

<!-- s: popup area -->

	<!-- s: 특약 팝업 -->
	{{#> popup/popup_bottom popup-id="sp_pop" popup-title="다음 특약에 가입하시겠어요?" }}
	<div class="popup_cont">
		<div class="popup_content">
			<div class="info_gray">
				<h5 class="title_h3">가입할 담보</h5>
				<ul class="list_depth">
					<li>차대차사고차량시세하락손실지원(개인자가용)</li>
					<li>차량유리교체비용지원(개인자가용, 연간1회한)</li>
				</ul>
			</div>
			<div class="form_group_wrap">
				<div class="form_line">
					<div class="label_tit">가입할 자동차번호</div>
					{{> cp/text inp-title="자동차번호 입력" placeholder="자동차번호 입력" }}
				</div>
				<ul class="list_ty2">
					<li>위 담보 가입 시 고객님 본인소유 개인 자가용(개인명의로 소유하거나 개인명의로 리스한 자동차) 차량정보가 필요합니다.</li>
					<li>보험증권에 기재된 본인소유 해당 차량에 대해서만 보장됩니다.</li>
				</ul>
			</div>
			<!-- e: popup_content_top -->
		</div>
	</div>
	<div class="popup_bottom">
		<div class="btn_area">
			{{> cp/button type="3" size="2" b-text="가입안함" }}
			{{> cp/button type="1" size="2" b-text="특약 가입" }}
		</div>
	</div>
	{{/ popup/popup_bottom}}
	<!-- e: 특약 팝업 -->

	<!-- 25-05-20 수정 -->
	<!-- s: 현대해상 결제 혜택 안내 팝업 -->
	{{#> popup/popup_bottom popup-id="ex_popup_bottom2" popup-title="자동차보험 가입 할인 안내" }}
	<div class="popup_cont">
		<div class="popup_content">
			<div class="p_benefit_info">
				<h2 class="title_h3">					
					<span class="ext">현대해상 자동차보험 가입 고객님은</span><br> 매월 보험료 7% 할인<span class="ext">을 해드려요</span>
				</h2>
				<h3 class="title_h4">보험료 할인 대상 확인</h3>
				<p class="sub_text">보험료 확인 화면 (본인인증 후)</p>
			</div>

			<div class="info_gray">
				<h3 class="title_h3">할인적용</h3>
				<ul class="list_depth">
					<li>현대해상 자동차보험 보험기간이 1년인 유효 계약 (이륜차보험 포함)</li>
					<li>초회보험료부터 적용되며 영업보험료의 7% 할인</li>
					<li>계약 체결 이후 할인적용대상에 해당되는 경우 할인 적용대상에 해당되는 시점 익월 이후 납입되는 보험료부터 할인 적용</li>
					<li>할인을 적용 받던 계약이 할인적용대상에 해당되지 않게 된 경우 익월 이후 납입되는 보험료부터 할인이 적용되지 않며, 다시 적용대상에 해당되더라도 할인이 재적용 되지 않음</li>
					<li>자세한 사항은 약관을 참고해 주세요.</li>
				</ul>
			</div>

			
		</div>
	</div>
	<div class="popup_bottom">
		<div class="btn_area">
			{{> cp/button type="1" size="2" b-text="확인" }}
		</div>
	</div>
	{{/ popup/popup_bottom}}
	<!-- e: 현대해상 결제 혜택 안내 팝업 -->
	<!-- 25-05-20 수정 -->

	<!-- s: 현대카드 결제 혜택 안내 팝업 -->
	{{#> popup/popup_bottom popup-id="ex_popup_bottom" popup-title="현대카드 결제 혜택 안내" }}
	<div class="popup_cont">
		<div class="popup_content">
			<div class="text_sub">현대카드로 1회차 보험료를 결제하면</div>
			<ol class="circle_list">
				<li>M포인트 100% 사용 가능(1회차 보험료만)</li>
				<li>2회차 이후 계속보험료도 현대카드로 결제 가능</li>
			</ol>
			<ul class="list_ty4">
				<li>
					카드 승인액 한도 내 보유포인트 전액이 차감됩니다.<br>
					(승인시점 기준 1,000P~3,000P 이용 가능)
				</li>
				<li>포인트는 1회차 보험료에 한해서만 사용됩니다.</li>
				<li>결제대금은 포인트가 차감된 금액으로 청구됩니다.</li>
				<li>
					포인트 관련 상담 및 문의<br>
					현대카드 고객센터(1577-6000)<br>
					현대카드 홈페이지(www.hyunhaicard.com)
				</li>
			</ul>
		</div>
	</div>
	<div class="popup_bottom">
		<div class="btn_area">
			{{> cp/button type="1" size="2" b-text="확인" }}
		</div>
	</div>
	{{/ popup/popup_bottom}}
	<!-- e: 현대카드 결제 혜택 안내 팝업 -->


	

	<!-- s: Full 팝업(예시) -->
	{{#> popup/popup_full popup-id="ex_popup_full" popup-title="팝업 타이틀" }}
	<div class="popup_cont">
		<div class="popup_content">
			<!-- s: popup_content_top -->
			<div class="popup_content_top">
				<h2 class="title_h2">
					타이틀영역
				</h2>
			</div>
			<!-- e: popup_content_top -->

			버튼클릭시 출력되는 풀 팝업 예시입니다.
		</div>
	</div>
	<div class="popup_bottom">		
		<div class="btn_area">
			{{> cp/button type="3" size="1" b-text="취소" }}
			{{> cp/button type="1" size="1" b-text="확인" }}
		</div>
	</div>
	{{/ popup/popup_full}}
	<!-- e: Full 팝업(예시) -->

<!-- e: popup area -->

<script>
	$(function () {

		// 보험 플랜 - 진입화면 라디오 선택 이벤트
		$('.guarantee_choice_wrap .guarantee_item .gi_radio input[type="radio"]').on('change', function() {
			const idx = $(this).closest('.guarantee_item').index();
			// console.log(idx)
			const $selectedItem = $(this).closest('.guarantee_item');
			$(this).closest('.guarantee_choice_wrap').addClass('active');
			$(this).closest('.guarantee_choice_wrap').find('.guarantee_item').removeClass('active');
			$(this).closest('.guarantee_item').addClass('active');

			// 모든 항목 초기화: 컨텐츠 닫고 타이틀 열기
			$('.guarantee_choice_wrap .guarantee_item').each(function() {
				$(this).find('.guarantee_item_cont').stop(true, true).slideUp(300);
				$(this).find('.guarantee_item_top').stop(true, true).slideDown(300);
			});

			// 선택된 항목만: 컨텐츠 열고 타이틀 닫기
			$selectedItem.find('.guarantee_item_cont').stop(true, true).slideDown(300);
			$selectedItem.find('.guarantee_item_top').stop(true, true).slideUp(300);

			// 고급 선택 시
			if( idx === 0 && $('.gtl_special').length ) {
				$('.gtl_special').addClass('active');
			} else {
				$('.gtl_special').removeClass('active');
			}

			// head 문구 변경
			$('.guarantee_top_item').eq(idx + 1).addClass('active').siblings('.guarantee_top_item').removeClass('active');

			// 비쥬얼 영역 변경			
			$('.guarantee_visuval').stop(true, true).slideUp(300);

			// 추가된 부분
			const selectedClass = $(this).closest('.guarantee_item').data('sendclass'); // 선택된 항목의 data-sendclass 값
			console.log('선택된 항목의 data-sendclass:', selectedClass);
		});
		// 보험 플랜 - 진입화면 라디오 선택 이벤트

		// Splide 설정
		var splide = new Splide('#splide_wrap_ty1 .splide', {
			speed: 500,
			accessibility: true,
			arrows: false, // 기본 화살표 비활성화
			focusableNodes: 'a, button, input, textarea, select, li',
		}).mount();

		splide.on('moved', function () {
			const $slides = $('.splide__slide');
			const $activeSlide = $slides.filter('.is-active');
			const $radio = $activeSlide.find('input[type="radio"]');

			// 모든 슬라이드 tabindex 제거
			$slides.removeAttr('tabindex');

			// 활성화된 슬라이드에 radio 체크 및 focus 처리
			if ($radio.length) {
				$radio.prop('checked', true).trigger('change');
			}

			// 접근성: 현재 슬라이드에 포커스
			$activeSlide.attr('tabindex', '0').focus();

			// 버튼 상태 갱신
			updateArrowState();
		});

		// 슬라이드 효과를 주기 위함
		splide.on('move', function (newIndex) {
			const $slides = $('.splide__slide');
			$slides.removeClass('effect');

			const $nextSlide = $slides.eq(newIndex);
			$nextSlide.addClass('effect');
		});

		// 커스텀 좌우 버튼 클릭 시 이동
		$('#splide_wrap_ty1 .swiper_button_left').on('click', () => splide.go('<'));
		$('#splide_wrap_ty1 .swiper_button_right').on('click', () => splide.go('>'));

		// 버튼 상태 업데이트 함수
		function updateArrowState() {
			const curr = splide.index;
			const max = splide.length - 1;

			$('#splide_wrap_ty1 .swiper_button_left').prop('disabled', curr === 0);
			$('#splide_wrap_ty1 .swiper_button_right').prop('disabled', curr === max);
		}

		// 초기 로드 시 상태 설정
		updateArrowState();	

		// 보험 플랜 - 우측 이동
		$('.move_detail').on('click', function () {
			const selectedClass = $('.guarantee_choice_wrap .guarantee_item input[type="radio"]:checked').closest('.guarantee_item').data('sendclass');
			console.log('선택된 항목의 data-sendclass:', selectedClass);
			const targetSlide = $('.splide__slide[data-getclass="' + selectedClass + '"]');

			if (targetSlide.length) {
				const targetIndex = targetSlide.index();  // 슬라이드의 인덱스를 구합니다.
				// console.log('목표 슬라이드 인덱스:', targetIndex);
				$('.guarantee_container').addClass('active');

				setTimeout(function() {
					$('.splide__list').find('.splide__slide').eq(targetIndex).addClass('effect').find('input[type="radio"]').prop('checked', true);;
					splide.go(targetIndex);
					$('.container').scrollTop(0);
					setTimeout(function(){
						$('.splide__list').find('.splide__slide').eq(targetIndex).attr('tabindex', '0').focus();
						$('.guarantee_container').css('position', 'static');
						$('.guarantee_container_left').attr('aria-hidden', true);
						$('.guarantee_container_right').css('position', 'static');
					}, 100)
				}, 500);
			}
		});
		// 보험 플랜 - 우측 이동

		// 25-05-19 수정
		window.addEventListener('resize', function () {
			splide.refresh(); // 슬라이드 다시 계산
		});
		// 25-05-19 수정
		
	});
</script>



{{/ layout/default }}
