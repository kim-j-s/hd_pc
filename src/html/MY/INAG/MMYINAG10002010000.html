{{#> layout/default page-title="기본정보 | 마이페이지"}}
	<div id="wrap" class="wrap">
		{{> layout/header h-title="계약상세조회" }}
		<div id="container" class="container">
			<div class="content">

				<!-- 상세납입정보 데이터 有 -->
				<div class="cd_top_wrap">
					<div class="cd_top">
						<div class="badge_wrap">
							<span class="hd_badge outline solid_pastel c_primary size_m"><strong>유지</strong> <span class="pipe_line">납입완료</span></span>
						</div>
						<div class="cd_top_name">
							무배당현대해상다이렉트실손의료비보장보험(계약전환용)(갱신형)(Hi2501)
						</div>
						<p class="cd_price">
							<span class="word">월</span>
							<strong class="won">55,700</strong>
							<span class="word">원</span>
						</p>

						<div class="progress_bar progress_bar_ty1 progress_bar_ty1_count" role="img" tabindex="0">
							<div class="progress_bar_per_cover">
								<div class="progress_bar_per">
									<div class="per_bar">
										<span class="per_bar_dp dp_ic1" data-pbc="63">
											<span class="text">63회</span>
										</span>
									</div>
								</div>
							</div>
							<div class="progress_bar_bottom">
								<span class="pbb_start" data-pbcs="0">0회</span>
								<span class="pbb_end" data-pbce="180">180회</span>
							</div>
						</div>
					</div>
				</div>
				<!-- 상세납입정보 데이터 有 -->

				<!-- 상세납입정보 데이터 無 -->
				<div class="cd_top_wrap">
					<div class="cd_top">
						<div class="badge_wrap">
							<span class="hd_badge outline solid_pastel c_primary size_m">유지</span>
						</div>
						<div class="cd_top_name">
							현대해상단체상해보험(직급전용)
						</div>

						<div class="progress_bar progress_bar_ty1 progress_bar_ty1_date" role="img" tabindex="0">
							<div class="progress_bar_per_cover">
								<div class="progress_bar_per">
									<div class="per_bar">
										<span class="per_bar_dp dp_ic2">
											<span class="text"></span>
										</span>
									</div>
								</div>
							</div>
							<div class="progress_bar_bottom">
								<span class="pbb_start" data-pbcsdate="2024.01.13">2024.01.13</span>
								<span class="pbb_end" data-pbcedate="2028.01.12">2028.01.12</span>
							</div>
						</div>
					</div>
				</div>
				<!-- 상세납입정보 데이터 無 -->


				<div class="tab_wrap">

					<div class="tab_wrap_list_ty1" role="tablist">
						{{>cp/tab_btn tb-text="기본정보" tb-id="01" tb-active=true}}
						{{>cp/tab_btn tb-text="보장내용" tb-id="02"}}
						{{>cp/tab_btn tb-text="납입정보" tb-id="03"}}
					</div>

					<!-- s: 기본정보 -->
					<div class="tab_wrap_content active" role="tabpanel" tabindex="0" aria-labelledby="tab01" id="tabPanel01">
						<h3 class="title_h3">기본정보</h3>
						<div class="table_wrap">
							<table class="table">
								<caption>계약번호, 계약상태, 보험기간, 목적물소재지 제공</caption>
								<colgroup>
									<col style="width:35%;">
									<col style="width:65%;">
								</colgroup>
								<tbody>
									<tr>
										<th scope="row">계약번호</th>
										<td>L1234****901</td>
									</tr>
									<tr>
										<th scope="row">계약상태</th>
										<td>실효(2023.11.11)</td>
									</tr>
									<tr>
										<th scope="row">보험기간</th>
										<td>2015.11.23~2037.11.23</td>
									</tr>
									<tr>
										<th scope="row">목적물소재지</th>
										<td>04535 서울 중구 명동2길 20, 현대해상명동사옥</td>
									</tr>
								</tbody>
							</table>
						</div>
						<div class="btn_area ty2">
							{{> cp/button type="3" size="3" b-text="연금보험공시 조회"}}
							{{> cp/button type="3" size="3" b-text="저축보험공시 조회"}}
							{{> cp/button type="3" size="3" b-text="환급금 조회"}}
							<!-- 연금, 연금저축 보험인 경우 버튼명 변경하여 노출 -->
							<!-- 
							{{> cp/button type="3" size="3" b-text="환급금/연금 조회"}}
							-->
							<!-- 연금, 연금저축 보험인 경우 버튼명 변경하여 노출 -->
						</div>

						<div class="divider_ty1"></div>

						<h3 class="title_h3">가입자 정보</h3>
						<div class="table_wrap">
							<table class="table">
								<!-- s: 25-05-14 수정 -->
								<caption>계약자, 피보험자, 휴대폰번호, 전화번호, 우편물 받는 곳 제공</caption>
								<!-- e: 25-05-14 수정 -->
								<colgroup>
									<col style="width:35%;">
									<col style="width:65%;">
								</colgroup>
								<tbody>
									<tr>
										<th scope="row">계약자</th>
										<td>하*현(991123-1******)</td>
									</tr>
									<tr>
										<th scope="row">피보험자</th>
										<td>하*현(991123-1******)</td>
									</tr>
									<tr>
										<th scope="row">휴대폰번호</th>
										<td>010-****-1234</td>
									</tr>
									<tr>
										<!-- s: 25-05-14 수정 -->
										<th scope="row">전화번호</th>
										<!-- e: 25-05-14 수정 -->
										<td>010-****-1234</td>
									</tr>
									<tr>
										<!-- s: 25-05-14 수정 -->
										<th scope="row">우편물 받는 곳</th>
										<!-- e: 25-05-14 수정 -->
										<td>(회사) 04535 서울 중구 명동2길 20, 현대해상명동사옥</td>
									</tr>
								</tbody>
							</table>
						</div>
						<div class="btn_area">
							{{> cp/button type="3" size="3" b-text="개인정보 변경" atag="true"}}
						</div>

						<div class="divider_ty1"></div>

						<h3 class="title_h3">수익자 정보</h3>
						<div class="form_group_wrap">
							<div class="form_line">
								<div class="label_tit">피보험자</div>
								{{> cp/selectitem si_ph="선택해주세요." si_title="피보험자 선택" si_item="하*현" si_popup="pop_type05"}}
							</div>
							<div class="form_line">
								<div class="label_tit">피보험자/목적물소재지</div>
								{{> cp/selectitem si_ph="선택해주세요." si_title="피보험자/목적물소재지 선택" si_item="하*현" si_popup="pop_type06"}}
							</div>
						</div>

						<div class="table_wrap">
							<table class="table">
								<caption>사망수익자, 기타수익자, 만기수익자 제공</caption>
								<colgroup>
									<col style="width:35%;">
									<col style="width:65%;">
								</colgroup>
								<tbody>
									<tr>
										<th scope="row">사망수익자</th>
										<td>법정상속인</td>
									</tr>
									<tr>
										<th scope="row">기타수익자</th>
										<td>하*현 (991123-1******)</td>
									</tr>
									<tr>
										<th scope="row">만기수익자</th>
										<td>하*현 (991123-1******)</td>
									</tr>
								</tbody>
							</table>
						</div>

						<div class="divider_ty1"></div>

						<h3 class="title_h3">계약담당자</h3>
						<ul class="contact_list">
							<li>
								<div class="item person">
									<div class="inner">
										<div class="name">홍길동</div>
										<div class="tel">010-1234-5678</div>
									</div>
								</div>
							</li>
							<li>
								<div class="item spot">
									<div class="inner">
										<div class="name">서울사업부 명동지점</div>
										<div class="tel">010-1234-5678</div>
									</div>
								</div>
							</li>
						</ul>
					</div>
					<!-- e: 기본정보 -->

					<!-- s: 보장내용 -->
					<div class="tab_wrap_content" role="tabpanel" tabindex="0" aria-labelledby="tab02" id="tabPanel02">

						<h3 class="title_h3">보장내용</h3>
						<div class="form_group_wrap">
							<div class="form_line">
								<div class="label_tit">피보험자</div>
								{{> cp/selectitem si_ph="선택해주세요." si_title="피보험자 선택" si_item="하*현" si_popup="pop_type05"}}
							</div>
							<div class="form_line">
								<div class="label_tit">피보험자/목적물소재지</div>
								{{> cp/selectitem si_ph="선택해주세요." si_title="피보험자/목적물소재지 선택" si_item="04535 서울 중구 명동2길 20, 현대해상명동사" si_popup="pop_type06"}}
							</div>
						</div>

						<div class="opt_select_list opt_case4">
							<a href="#" class="option" role="button">
								<div class="item">
									<div class="data_l">
										<span class="name">기본계약(상해사망)</span>
										<span class="date">2021.01.15~2055.01.15</span>
									</div>
									<div class="data_r">
										<span class="price">1억 5,000만원</span>
									</div>
								</div>
							</a>
							<a href="#" class="option" role="button">
								<div class="item">
									<div class="data_l">
										<span class="name">기본계약(상해후유장해)</span>
										<span class="date">2021.01.15~2055.01.15</span>
									</div>
									<div class="data_r">
										<span class="price">5,000만원</span>
									</div>
								</div>
							</a>
							<a href="#" class="option" role="button">
								<div class="item">
									<div class="data_l">
										<span class="name">상해사망추가담보</span>
										<span class="date">2021.01.15~2055.01.15</span>
									</div>
									<div class="data_r">
										<span class="price">5,000만원</span>
									</div>
								</div>
							</a>
							<a href="#" class="option" role="button">
								<div class="item">
									<div class="data_l">
										<span class="name">중증화상/부식진단담보</span>
										<span class="date">2021.01.15~2055.01.15</span>
									</div>
									<div class="data_r">
										<span class="price">2,000만원</span>
									</div>
								</div>
							</a>
							<!-- CASE. 보장(보험)기간이 없는 경우 -->
							<a href="#" class="option" role="button">
								<div class="item">
									<div class="data_l">
										<span class="name">기본계약(자동차사고부상(운전자,1-7급))</span>
									</div>
									<div class="data_r">
										<span class="price">1억 5,000만원</span>
									</div>
								</div>
							</a>
							<a href="#" class="option" role="button">
								<div class="item">
									<div class="data_l">
										<span class="name">교통상해후유장해(운전자,50%이상)담보</span>
									</div>
									<div class="data_r">
										<span class="price">5,000만원</span>
									</div>
								</div>
							</a>
							<a href="#" class="option" role="button">
								<div class="item">
									<div class="data_l">
										<span class="name">스프링쿨러누출손해</span>
									</div>
									<div class="data_r">
										<span class="price">5,000만원</span>
									</div>
								</div>
							</a>
							<a href="#" class="option" role="button">
								<div class="item">
									<div class="data_l">
										<span class="name">화재손해</span>
									</div>
									<div class="data_r">
										<span class="price">1,000만원</span>
									</div>
								</div>
							</a>
							<!-- CASE. 보장(보험)기간이 없는 경우 -->
						</div>

						<div class="btn_area">
							{{> cp/button type="3" size="3" b-text="갱신담보 가입여부 조회"}}
						</div>
						


					</div>
					<!-- e: 보장내용 -->
					 
					<!-- s: 납입정보 -->
					<div class="tab_wrap_content" role="tabpanel" tabindex="0" aria-labelledby="tab03" id="tabPanel02">
						<!-- s: 25-05-14 수정 -->
						<h3 class="title_h3">납입정보</h3>
						<!-- e: 25-05-14 수정 -->
						<div class="table_wrap">
							<table class="table">
								<caption>보험료(납입주기), 납입방법(이체일), 보장보험료, 적립보험료, 납입횟수, 납기/만기, 최초납입일, 최종납입월, 자동이체계좌정보 제공</caption>
								<colgroup>
									<col style="width:35%;">
									<col style="width:65%;">
								</colgroup>
								<tbody>
									<tr>
										<th scope="row">보험료(납입주기)</th>
										<td>2,920원(1개월납)</td>
									</tr>
									<tr>
										<th scope="row">납입방법(이체일)</th>
										<td>자동이체(16일)</td>
									</tr>
									<tr>
										<th scope="row">보장보험료</th>
										<td>5,180원</td>
									</tr>
									<tr>
										<th scope="row">적립보험료</th>
										<td>24,820원</td>
									</tr>
									<tr>
										<th scope="row">납입횟수</th>
										<td>63회/180회</td>
									</tr>
									<tr>
										<th scope="row">납기/만기</th>
										<td>전기납/15년만기</td>
									</tr>
									<tr>
										<th scope="row">최초납입일</th>
										<td>2019.01.16</td>
									</tr>
									<tr>
										<th scope="row">최종납입월</th>
										<td>2023년 05월분</td>
									</tr>
									<tr>
										<th scope="row">자동이체계좌정보</th>
										<td>
											우리은행 1002*****1234<br>
											예금주: 김*대 
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<div class="btn_area">
							{{> cp/button type="3" size="3" b-text="납입내역 조회"}}
							{{> cp/button type="3" size="3" b-text="자동이체계좌 신청/변경" atag="true"}}
						</div>

					</div>
					<!-- e: 납입정보 -->
				</div>


				<!-- s: 이용안내 -->
				<!-- dp-active=true -->
				<div class="acd_item acd_item_ty5">
				{{#> cp/accordion ac-title="이용안내" ac-active=true}}
				<ul class="list_depth">
					<!-- s: 25-05-14 수정 -->
					<li>
						보험료는 적립보험료와 보장보험료를 합한 금액으로, 해당 계약에 할인이 적용되는 경우 할인율이 적용된 금액입니다. 자세한 내용은 계약담당자에게 문의해주세요.
					</li>
					<li>
						보장내용 중 갱신형 담보의 보장기간은 갱신주기별로 계산됩니다. 
						<ul>
							<li>
								예) 보험기간이 2022.01.01에 시작되는 계약의 5년 갱신주기 담보의 경우<br>
								최초 보장기간이 ‘2022.01.01~2027.01.01’로 표시됩니다. 5년 갱신주기 이후에는 보장기간이 다시 계산되어 표시됩니다.
							</li>
						</ul>
					</li>
					<li>
						어린이보험은 2019년 4월 이후 계약부터 총 납입횟수에 태아보험료(태아확정 이전) 납입횟수가 포함됩니다.
						<ul>
							<li>
								예) 3월에 태아보험 가입, 6월에 태아확정, 20년납으로 가입한 경우<br>
								3, 4, 5월 태아보험료 납입횟수 3회 + 20년납 납입횟수 240회 → 총 ‘243회’로 납입횟수가 합산되어 표시됩니다.
							</li>
						</ul>
					</li>
					<li>
						보호상품: 보험계약자가 개인인 경우, 가입한 보험상품은 해지환급금(또는 만기 시 보험금이나 사고보험금)에 기타 지급금을 더해 5천만원까지(현대해상 모든 상품 합산) 예금자보호가 됩니다. 다만, 계약체결 이후 보험계약자 및 보험료납부자가 법인이면 보호되지 않습니다.
					</li>
					<!-- e: 25-05-14 수정 -->
				</ul>
				{{/ cp/accordion }}
				</div>
				<!-- e: 이용안내 -->

				<div class="divider_ty1"></div>

				<div class="suggestion_list_wrap">
					<div class="title_h4"><strong>어떤 서비스가 필요하세요?</strong></div>
					<div class="item_wrap">
						<button type="button" class="tag_item size_m"><span class="text">#보험금 청구 안내</span></button>
						<button type="button" class="tag_item size_m"><span class="text">#보험계약대출 신청</span></button>
						<button type="button" class="tag_item size_m"><span class="text">#보험증권</span></button>
						<button type="button" class="tag_item size_m"><span class="text">#자동이체계좌 신청/변경</span></button>
					</div>
				</div>

				


			</div>
		</div>
		<!-- s: 25-05-07 수정 -->
		<!-- s: 하단 고정 버튼 영역 -->
		<div class="bottom_fix_wrap">
			<div class="btn_area">
				{{> cp/button type="1" size="1" b-text="목록으로"}}
			</div>
		</div>
		<!-- s: 하단 고정 버튼 영역 -->
		<!-- e: 25-05-07 수정 -->
	</div>

	<!-- s: popup area -->


	<!-- s: 피보험자 선택 목록 -->
	{{#> popup/popup_bottom popup-id="pop_type05" popup-title="피보험자"}}
	<div class="popup_cont">
		<div class="popup_content">
			<div class="opt_select_list opt_case3">
				<div role="button" tabindex="0" class="option"><span class="text">하*현</span></div>
				<div role="button" tabindex="0" class="option"><span class="text">하*현 2</span></div>
				<div role="button" tabindex="0" class="option"><span class="text">하*현 3</span></div>
				<div role="button" tabindex="0" class="option"><span class="text">하*현 4</span></div>
				<div role="button" tabindex="0" class="option"><span class="text">하*현 5</span></div>
				<div role="button" tabindex="0" class="option"><span class="text">하*현 6</span></div>
			</div>
		</div>
	</div>
	{{/ popup/popup_bottom}}
	<!-- e: 피보험자 선택 목록 -->

	<!-- s: 피보험자/목적물소재지 선택 목록 -->
	{{#> popup/popup_bottom popup-id="pop_type06" popup-title="피보험자/목적물소재지"}}
	<div class="popup_cont">
		<div class="popup_content">
			<div class="opt_select_list opt_case3">
				<div role="button" tabindex="0" class="option"><span class="text">04535 서울 중구 명동2길 20, 현대해상명동사옥</span></div>
				<div role="button" tabindex="0" class="option"><span class="text">04535 서울 중구 명동2길 20, 현대해상명동사옥 2</span></div>
				<div role="button" tabindex="0" class="option"><span class="text">04535 서울 중구 명동2길 20, 현대해상명동사옥 3</span></div>
				<div role="button" tabindex="0" class="option"><span class="text">04535 서울 중구 명동2길 20, 현대해상명동사옥 4</span></div>
				<div role="button" tabindex="0" class="option"><span class="text">04535 서울 중구 명동2길 20, 현대해상명동사옥 5</span></div>
				<div role="button" tabindex="0" class="option"><span class="text">04535 서울 중구 명동2길 20, 현대해상명동사옥 6</span></div>
			</div>
		</div>
	</div>
	{{/ popup/popup_bottom}}
	<!-- e: 피보험자/목적물소재지 선택 목록 -->
	 
	<!-- e: popup area -->


	<script>
		$(function(){		
	
		function updateProgressBarPosition($progressBar) {
				
			// 접근성 관련 문구 생성 후 삽입
			var current = $progressBar.find('[data-pbc]').data('pbc');
			var total = $progressBar.find('[data-pbce]').data('pbce');
	
			$progressBar.attr('aria-label', '전체 ' + total + '회 중 ' + current + '회 납입');
			
			// 전체 넓이
			var $progressBarPer = $progressBar.find('.progress_bar_per');
			var progressBarPerWidth = $progressBarPer.outerWidth(); // 기준 넓이(px)
	
			// 퍼센트 계산 (소수점 없이)
			var percent = Math.floor((current / total) * 100);       // 현재 진행률(%)
	
			var pixelWidth = Math.floor((percent / 100) * progressBarPerWidth);  // 진행률 px 환산
	
			var $perBar = $progressBar.find('.per_bar');
			var $perBarDp = $perBar.find('.per_bar_dp');
			var perBarDpWidth = $perBarDp.outerWidth();
	
			// console.log('움직이는 컨텐츠 넓이 : ', perBarDpWidth);
	
			// 초기 클래스 제거
			$perBar.removeClass('pos');
			$perBarDp.removeClass('poe');
	
			// 앞에 고정하기
			if (pixelWidth < perBarDpWidth / 2) {
				$perBar.addClass('pos');
			} else {
				$perBar.removeClass('pos');
			}
	
			// 끝으로 보내기
			if (progressBarPerWidth - pixelWidth < perBarDpWidth / 2) {
				$perBar.addClass('poe');
			} else {
				$perBar.removeClass('poe');
			}
	
			// per_bar 너비 설정
			setTimeout(function(){
				$perBar.addClass('active').css('width', percent + '%');
			}, 100);
		}
	
		// 여러 개의 .progress_bar_ty1_count 대해 반복 처리
		$('.progress_bar_ty1_count').each(function() {
			var $this = $(this); // 각 progress_bar_ty1을 $this로 참조
			
			// 윈도우 로드 시 updateProgressBarPosition 함수 호출
			$(window).on('load', function () {
				updateProgressBarPosition($this);
			});
	
			// 리사이즈 시에도 적용
			$(window).on('resize', function () {
				console.log('리사이즈 됨?');
				updateProgressBarPosition($this);
			});
		});
	
	
		function updateProgressBarWithDate() {
	
			// progress_bar_ty1에 대해 각 요소 선택
			$('.progress_bar_ty1_date').each(function() {
				var $progressBar = $(this);
	
				// 시작일과 종료일을 data 속성으로부터 가져오기
				var startDate = $progressBar.find('[data-pbcsdate]').data('pbcsdate');
				var endDate = $progressBar.find('[data-pbcedate]').data('pbcedate');
	
				
	
				// 날짜 형식: 'YYYY.MM.DD' → Date 객체로 변환
				var start = new Date(startDate.replace(/\./g, '/'));
				var end = new Date(endDate.replace(/\./g, '/'));
				var now = new Date();  // 현재 날짜
	
				// 전체 기간 계산 (밀리초 단위)
				var totalTime = end - start;
				// 현재 진행 시간 계산 (밀리초 단위)
				var currentTime = now - start;
	
				// 진행률 계산 (소수점 없이)
				var percent = Math.floor((currentTime / totalTime) * 100);
	
				// D-XX 형식으로 남은 일수 계산
				var remainingDays = Math.ceil((end - now) / (1000 * 60 * 60 * 24));
	
				// 'D-XX' 형식으로 .text에 삽입
				$progressBar.find('.per_bar_dp .text').text('D-' + remainingDays);
	
				// 접근성 관련 문구 생성 후 삽입
				$progressBar.attr('aria-label', '만기일 (' + endDate + ') 만기 ' + remainingDays + '일 전');
	
				// 전체 넓이
				var $progressBarPer = $progressBar.find('.progress_bar_per');
				var progressBarPerWidth = $progressBarPer.outerWidth(); // 기준 넓이(px)
	
				// 진행률을 px로 환산
				var pixelWidth = Math.floor((percent / 100) * progressBarPerWidth);
	
				var $perBar = $progressBar.find('.per_bar');
				var $perBarDp = $perBar.find('.per_bar_dp');
				var perBarDpWidth = $perBarDp.outerWidth();
	
				// 초기 클래스 제거
				$perBar.removeClass('pos');
				$perBarDp.removeClass('poe');
	
				// 앞에 고정하기
				if(pixelWidth < perBarDpWidth / 2) {
						console.log('앞에 처박기');
						$perBar.addClass('pos');
				}
	
				// 끝으로 보내기
				if(progressBarPerWidth - pixelWidth < perBarDpWidth / 2) {
						console.log('끝으로 보내기');
						$perBar.addClass('poe');
				}
	
				// 진행률에 따른 per_bar 너비 설정
				setTimeout(function(){
						$perBar.addClass('active').css('width', percent + '%');
				}, 100);
			});
			}
	
			$(window).on('load', function () {
			updateProgressBarWithDate();
			});
	
			// 리사이즈 시에도 적용
			$(window).on('resize', function () {
			updateProgressBarWithDate();
			});
	
	});
	
	</script>

{{/ layout/default }}